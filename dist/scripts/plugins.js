!function(a,b){"use strict";function c(a,b){d.directive(a,["$parse","$swipe",function(c,d){var e=75,f=.3,g=30;return function(h,i,j){function k(a){if(!l)return!1;var c=Math.abs(a.y-l.y),d=(a.x-l.x)*b;return m&&e>c&&d>0&&d>g&&f>c/d}var l,m,n=c(j[a]);d.bind(i,{start:function(a){l=a,m=!0},cancel:function(){m=!1},end:function(a){k(a)&&h.$apply(function(){n(h)})}})}}])}var d=b.module("ngMobile",[]);d.factory("$swipe",[function(){function a(a){var b=a.touches&&a.touches.length?a.touches:[a],c=a.changedTouches&&a.changedTouches[0]||a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]||b[0].originalEvent||b[0];return{x:c.clientX,y:c.clientY}}var b,c,d,e,f=10,g=!1;return{bind:function(h,i){h.bind("touchstart mousedown",function(f){d=a(f),g=!0,b=0,c=0,e=d,i.start&&i.start(d)}),h.bind("touchcancel",function(){g=!1,i.cancel&&i.cancel()}),h.bind("touchmove mousemove",function(h){if(g&&d){var j=a(h);if(b+=Math.abs(j.x-e.x),c+=Math.abs(j.y-e.y),e=j,!(f>b&&f>c))return c>b?(g=!1,void 0):(h.preventDefault(),i.move&&i.move(j),void 0)}}),h.bind("touchend mouseup",function(b){g&&(g=!1,i.end&&i.end(a(b)))})}}}]),d.config(["$provide",function(a){a.decorator("ngClickDirective",["$delegate",function(a){return a.shift(),a}])}]),d.directive("ngClick",["$parse","$timeout","$rootElement",function(a,b,c){function d(a,b,c,d){return Math.abs(a-c)<n&&Math.abs(b-d)<n}function e(a,b,c){for(var e=0;e<a.length;e+=2)if(d(a[e],a[e+1],b,c))return a.splice(e,e+2),!0;return!1}function f(a){if(!(Date.now()-i>m)){var b=a.touches&&a.touches.length?a.touches:[a],c=b[0].clientX,d=b[0].clientY;1>c&&1>d||e(j,c,d)||(a.stopPropagation(),a.preventDefault())}}function g(a){var c=a.touches&&a.touches.length?a.touches:[a],d=c[0].clientX,e=c[0].clientY;j.push(d,e),b(function(){for(var a=0;a<j.length;a+=2)if(j[a]==d&&j[a+1]==e)return j.splice(a,a+2),void 0},m,!1)}function h(a,b){j||(c[0].addEventListener("click",f,!0),c[0].addEventListener("touchstart",g,!0),j=[]),i=Date.now(),e(j,a,b)}var i,j,k=750,l=12,m=2500,n=25;return function(b,c,d){function e(){n=!1}var f,g,i,j,m=a(d.ngClick),n=!1;c.bind("touchstart",function(a){n=!0,f=a.target?a.target:a.srcElement,3==f.nodeType&&(f=f.parentNode),g=Date.now();var b=a.touches&&a.touches.length?a.touches:[a],c=b[0].originalEvent||b[0];i=c.clientX,j=c.clientY}),c.bind("touchmove",function(){e()}),c.bind("touchcancel",function(){e()}),c.bind("touchend",function(a){var c=Date.now()-g,d=a.changedTouches&&a.changedTouches.length?a.changedTouches:a.touches&&a.touches.length?a.touches:[a],e=d[0].originalEvent||d[0],o=e.clientX,p=e.clientY,q=Math.sqrt(Math.pow(o-i,2)+Math.pow(p-j,2));n&&k>c&&l>q&&(h(o,p),f&&f.blur(),b.$apply(function(){m(b,{$event:a})})),n=!1}),c.onclick=function(){},c.bind("click",function(a){b.$apply(function(){m(b,{$event:a})})})}}]),c("ngSwipeLeft",-1),c("ngSwipeRight",1)}(window,window.angular),angular.module("angular-carousel",["ngMobile"]),angular.module("angular-carousel").directive("rnCarouselIndicators",[function(){return{restrict:"A",replace:!0,scope:{items:"=",index:"="},template:'<div class="rn-carousel-indicator"><span ng-repeat="item in items" ng-class="{active: $index==$parent.index}">‚óè</span></div>'}}]),angular.module("angular-carousel").directive("rnCarouselInfinite",["$parse","$compile",function(a){return{restrict:"EA",transclude:!0,replace:!0,scope:!0,template:"<ul rn-carousel rn-carousel-buffered><li ng-transclude></li></ul>",compile:function(b,c){var d=c.rnCarouselCurrent+" in items";return b.find("li").attr("ng-repeat",d),function(b,c,d){b.items=[a(d.rnCarouselCurrent)(b)],b.$watchCollection("carouselCollection.position",function(c){a(d.rnCarouselCurrent).assign(b.$parent,b.items[c])})}}}}]),angular.module("angular-carousel").directive("rnCarousel",["$compile","$parse","$swipe","$document","$window","CollectionManager",function(a,b,c,d,e,f){var g=0;return{restrict:"A",scope:!0,compile:function(h,i){h.addClass("rn-carousel-slides");var j,k,l=h.find("li")[0].attributes,m=l["ng-repeat"],n=!1;if(m||(m=l["data-ng-repeat"]),m||(m=l["x-ng-repeat"]),m){var o=m.value.match(/^\s*(.+)\s+in\s+(.*?)\s*(\s+track\s+by\s+(.+)\s*)?$/),p=o[1],q=o[3]||"";j=o[2],n=angular.isDefined(i.rnCarouselBuffered),m.value=p+" in carouselCollection.cards "+q}else{var r=h.find("li");if(r.length<2)throw new Error("carousel: cannot find the ngRepeat attribute OR no childNodes detected");j="fakeArray",k=Array.prototype.slice.apply(r)}return function(h,i,l){function m(a){var b=angular.element(a).css("transform").match(/translate3d\((-?\d+(?:px)?),\s*(-?\d+(?:px)?),\s*(-?\d+(?:px)?)\)/);return b?b.slice(1,3):[0,0,0]}function o(a){!a.target||a.target!==H[0]||"transform"!==a.propertyName&&"-webkit-transform"!==a.propertyName&&"-moz-transform"!==a.propertyName||(h.$apply(function(){r(),h.carouselCollection.adjustBuffer(),w(!0)}),H.css(t(m(H[0]),!0)))}function p(a,b){function c(){G=!0,h.carouselCollection[a](b,!0)}h.$$phase?c():h.$apply(c)}function q(a,b){var c="after"===a?"push":"unshift";b&&(angular.isObject(b.promise)?b.promise.then(function(a){a&&p(c,a)}):angular.isFunction(b.then)?b.then(function(a){a&&p(c,a)}):p(c,b))}function r(){var a=h.carouselCollection.position,c=h.carouselCollection.getLastIndex(),d=null;0===a&&angular.isDefined(l.rnCarouselPrev)&&(d=b(l.rnCarouselPrev)(h,{item:h.carouselCollection.cards[0]}),q("before",d)),a===c&&angular.isDefined(l.rnCarouselNext)&&(d=b(l.rnCarouselNext)(h,{item:h.carouselCollection.cards[h.carouselCollection.cards.length-1]}),q("after",d))}function s(a,b){var c={};return c[a]=b,angular.forEach(O,function(d){c["-"+d.toLowerCase()+"-"+a]=b}),c}function t(a,b){return b?s("transform","translate3d("+a+"px,0,0)"):s("transform","translate("+a+"px,0)")}function u(){v(),w()}function v(){I.css("width","auto"),G=!0;var a=H.find("li");return F=0===a.length?H[0].getBoundingClientRect().width:a[0].getBoundingClientRect().width,I.css("width",F+"px"),F}function w(a){G=!!a||G,0===F&&v(),D=h.carouselCollection.getRelativeIndex()*-F,G===!0?H.removeClass("rn-carousel-animate").addClass("rn-carousel-noanimate").css(t(D,!1)):H.removeClass("rn-carousel-noanimate").addClass("rn-carousel-animate").css(t(D,!0)),G=!1}function x(a){if(d.unbind("mouseup",y),0===F&&v(),A>1){var b=h.carouselCollection.getLastIndex(),c=h.carouselCollection.position,e=C>D?1:-1,f=Math.min(Math.max(0,c+e),b),g=a.x-B;Math.abs(g)<=F*E&&(f=c);var i=c!==f;i?h.$apply(function(){angular.isDefined(l.rnCarouselCycle)&&(h.carouselCollection.position=f,w()),h.carouselCollection.goTo(f,!0)}):h.$apply(function(){w()})}A=0}function y(a){x({x:a.clientX,y:a.clientY})}g++;var z="rn-carousel-"+g,A=0,B=0,C=0,D=0,E=.1,F=0,G=!0,H=i.wrap("<div id='"+z+"' class='rn-carousel-container'></div>"),I=H.parent();k&&(h.fakeArray=k);var J=b(j),K={},L=0;if(l.rnCarouselIndex){var M=b(l.rnCarouselIndex);angular.isFunction(M.assign)?(h.$watch("carouselCollection.index",function(a){M.assign(h.$parent,a)}),L=M(h),h.$parent.$watch(M,function(a){void 0!==a&&h.carouselCollection.goToIndex(a,!0)})):isNaN(l.rnCarouselIndex)||(L=parseInt(l.rnCarouselIndex,10))}angular.isDefined(l.rnCarouselCycle)&&(K.cycle=!0),K.index=L,n&&(K.bufferSize=3,K.buffered=!0),h.carouselCollection=f.create(K),h.$watch("carouselCollection.updated",function(a){a&&w()});var N=!1;h.$watch(J,function(a){h.carouselCollection.setItems(a,N),N=!0,0===F&&v(),w()}),angular.isDefined(l.rnCarouselWatch)&&h.$watch(j,function(a){h.carouselCollection.setItems(a,!1),N=!0,0===F&&v(),w()},!0);var O=["webkit","moz"];if(H[0].addEventListener("webkitTransitionEnd",o,!1),H[0].addEventListener("transitionend",o,!1),window.addEventListener("orientationchange",u),window.addEventListener("resize",u),angular.isDefined(l.rnCarouselIndicator)){var P=a("<div id='"+z+"-indicator' index='carouselCollection.index' items='carouselCollection.items' data-rn-carousel-indicators class='rn-carousel-indicator'></div>")(h);I.append(P)}var Q=null,R=e.jasmine||"iPad"==e.navigator.platform?0:50;c.bind(H,{start:function(a){0===A&&(A=1,B=a.x),d.bind("mouseup",y)},move:function(a){if(0!==A){var b=a.x-B;if(1===A&&0!==b)A=2,C=D;else if(2===A){var c=(new Date).getTime();if(Q&&R>c-Q)return;Q=c;var d=h.carouselCollection.getLastIndex(),e=h.carouselCollection.position,f=1;(0===e&&a.x>B||e===d&&a.x<B)&&(f=3),D=C+b/f,H.css(t(D,!0)).removeClass("rn-carousel-animate").addClass("rn-carousel-noanimate")}}},end:function(a){x(a)}})}}}}]),angular.module("angular-carousel").service("CollectionManager",[function(){function a(a){var b,c={bufferSize:0,bufferStart:0,buffered:!1,cycle:!1,cycleOffset:0,index:0,position:0,items:[],cards:[],updated:null,debug:!1};if(a)for(b in a)c[b]=a[b];for(b in c)this[b]=c[b];angular.extend(this,c,a),this.init()}return a.prototype.log=function(){this.debug&&console.log.apply(console,arguments)},a.prototype.getPositionFromIndex=function(a){return(a+this.cycleOffset)%this.length()},a.prototype.goToIndex=function(a,b){if(a=Math.max(0,Math.min(a,this.getLastIndex())),this.updated&&a===this.index)return this.log("skip position change(same)"),!1;var c=this.getPositionFromIndex(a);return this.goTo(c,b)},a.prototype.goTo=function(a,b){if(this.log("goto start",a,b),0===this.length())return this.log("empty, skip gotoIndex"),void 0;a=Math.max(0,Math.min(a,this.getLastIndex()));var c=!1;this.cycle&&(0===a?(this.log("cycleAtBeginning",a),this.cycleAtBeginning(),a=1,this.cycleOffset++,c=!0):a===this.getLastIndex()&&(this.log("cycleAtEnd",a),this.cycleAtEnd(),a--,this.cycleOffset--,c=!0),this.cycleOffset%=this.length()),this.position=Math.max(0,Math.min(a,this.getLastIndex()));var d=(this.position-this.cycleOffset+this.length())%this.length();this.index=Math.max(0,Math.min(d,this.getLastIndex())),b||this.adjustBuffer(),c||(this.updated=new Date)},a.prototype.next=function(){this.cycle?this.goTo((this.position+1)%this.length()):this.goTo(Math.min(this.position+1,this.getLastIndex()))},a.prototype.prev=function(){if(this.cycle)this.goTo((this.position-1+this.length())%this.length());else{var a=this.length()>0?Math.max(0,(this.position-1)%this.length()):0;this.goTo(a)}},a.prototype.setBufferSize=function(a){this.log("setBufferSize",a),this.bufferSize=a,this.adjustBuffer()},a.prototype.isBuffered=function(){return this.buffered},a.prototype.getRelativeIndex=function(){var a=Math.max(0,Math.min(this.getLastIndex(),this.position-this.bufferStart));return a},a.prototype.adjustBuffer=function(){var a=(this.getLastIndex()+1-this.bufferSize)%this.length();this.log("maxBufferStart",a),this.bufferStart=Math.max(0,Math.min(a,this.position-1)),this.cards=this.items.slice(this.bufferStart,this.bufferStart+this.bufferSize),this.log("adjustBuffer from",this.bufferStart,"to",this.bufferStart+this.bufferSize)},a.prototype.length=function(){return this.items.length},a.prototype.getLastIndex=function(){var a=Math.max(0,this.length()-1);return a},a.prototype.init=function(){this.setBufferSize(this.isBuffered()?this.bufferSize:this.length()),this.length()>0&&this.goToIndex(this.index)},a.prototype.setItems=function(a,b){this.log("setItems",a,b),b&&(this.index=0,this.position=0),this.items=a||[],this.init()},a.prototype.cycleAtEnd=function(){this.push(this.items.shift())},a.prototype.push=function(a,b){this.log("push item(s)",a,b),this.items.push(a),b&&(this.adjustBuffer(),this.updated=new Date),this.buffered||this.bufferSize++},a.prototype.unshift=function(a,b){this.log("unshift item(s)",a,b),this.items.unshift(a),this.buffered||this.bufferSize++,b&&(this.position++,this.adjustBuffer(),this.updated=new Date)},a.prototype.cycleAtBeginning=function(){this.unshift(this.items.pop())},{create:function(b){return new a(b)}}}]);